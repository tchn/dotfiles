set_default() {
    # set -o errexit
    set -o nounset
    # set -o pipefail
}

if_exists() {
    local fname="$1"
    set_default
    if [ -e "$fname" ]; then
        return 0
    else
        return 1
    fi
}

mksynergyconf() {
    local leftscr=$1
    local rightscr=$2

    cat > ~/.synergy.conf << EOF
section: screens
    $leftscr:
    $rightscr:
end

section: links
    $leftscr:
       right = $rightscr
    $rightscr:
       left = $leftscr
end

section: options
    keystroke(alt+shift+\u004c) = switchToScreen($leftscr)
    keystroke(alt+shift+\u0052) = switchToScreen($rightscr)
    screenSaverSync = true
end

EOF
}

synergys_start() {
    set_default
    # conf="$1"
    synergys -f --config "${1:-${HOME}/.synergy.conf}"
}

synergyc_connect() {
    set_default
    local srv="$1"
    ssh -p "${2:-22}" -f -N -L 24800:"$1":24800 "$1"
    synergyc -f localhost
}

hex() {
    set_default
    if_exists $(which hexdump) && hexdump -v -e '/1 "%02x"' $1
}

h2b() {
    set_default
    if_exists $(which xxd) && xxd -r -p $1
}
